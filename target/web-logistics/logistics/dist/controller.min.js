app.controller("addCourseCtrl",["$scope","$http","httpService","$uibModalInstance","SweetAlert","$rootScope",function(t,e,n,a,o,c){t.cancel=function(){a.dismiss("cancel")},t.title="添加课程信息",t.type=0,t.disabled=!0,t.submitForm=function(){if(t.submit_form.$valid){var e={code:t.code,name:t.name,class_hour:t.class_hour,type:t.type,teacher_name:t.teacher_name,class_time:t.class_time,start_time:t.start_time,end_time:t.end_time};n.addRow(e,"course/addCourse").then(function(e){t.result=e,t.cancel(),o.swal("操作成功","","success")},function(){o.swal("操作失败","","error")})}else o.swal("操作失败","","error")}}]),app.controller("courseManageCtrl",["$http","httpService","$scope","$uibModal","SweetAlert","$rootScope",function(e,n,a,t,o,c){a.root={},a.rowlist=[],a.pagination={totalCount:0,totalPage:0,pageSize:10,currentPage:1,PageSizeList:[5,10,30]},a.changePageSize=function(e){a.pagination.pageSize=e,a.pagination.currentPage=1,a.queryList()},a.queryList=function(){var e={code:a.code,name:a.name,pageNo:a.pagination.currentPage,pageSize:a.pagination.pageSize};n.getAll(e,"course/showCourse").then(function(e){a.pagination.totalCount=e.totalCount,a.pagination.totalPage=e.totalPage,a.pagination.pageSize=e.pageSize,a.pagination.currentPage=e.pageNo,a.root.data=e.data},function(){})},a.queryList(),a.addCourse=function(){t.open({size:"lg",backdrop:"static",keyboard:!1,animation:!0,templateUrl:"courseForm.html",controller:"addCourseCtrl"}).result.then(function(e){},function(e){a.queryList()})},a.editRow=function(e){t.open({size:"lg",backdrop:"static",keyboard:!1,animation:!0,templateUrl:"courseForm.html",controller:"updateCourseCtrl",resolve:{data:a.root.data[e]}}).result.then(function(e){},function(e){a.queryList()})},a.reset=function(){a.name=null,a.code=null,a.queryList()},a.delRow=function(e){var t={id:e};o.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&n.delRow(t,"course/delCourse").then(function(e){a.result=e,a.queryList(),1==e?o.swal("删除成功","","success"):o.swal("删除失败","","error")},function(){o.swal("删除失败","","error")})})},a.checked=[],a.selectAll=function(){a.select_all?(a.checked=[],angular.forEach(a.root.data,function(e){e.checked=!0,a.checked.push(e.id)})):angular.forEach(a.root.data,function(e){e.checked=!1,a.checked=[]})},a.selectOne=function(){angular.forEach(a.root.data,function(e){var t=a.checked.indexOf(e.id);e.checked&&-1===t?a.checked.push(e.id):e.checked||-1===t||a.checked.splice(t,1)}),a.root.data.length===a.checked.length?a.select_all=!0:a.select_all=!1},a.delRows=function(){if(a.checked.length<0||0===a.checked.length)o.swal("至少选择一条记录，再做删除","","warning");else{var t={ids:a.checked};o.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&n.delRows(t,"course/delCourses").then(function(e){a.result=e,a.queryList(),1==e?o.swal("删除成功","","success"):o.swal("删除失败","","error")},function(){o.swal("删除失败","","error")})})}}}]),app.controller("updateCourseCtrl",["$scope","data","$uibModalInstance","SweetAlert","httpService",function(t,n,e,a,o){console.log("da",n),t.title="编辑课程信息",t.code=n.code?n.code:"",t.name=n.name?n.name:"",t.teacher_name=n.teacherName?n.teacherName:"",t.class_hour=n.classHour?n.classHour:"",t.type=n.type?n.type:"",t.start_time=n.startTime?n.startTime:"",t.end_time=n.endTime?n.endTime:"",t.class_time=n.classTime?n.classTime:"",t.cancel=function(){e.dismiss("cancel")},t.submitForm=function(){if(t.submit_form.$valid){var e={id:n.id,code:t.code,name:t.name,class_hour:t.class_hour,type:t.type,teacher_name:t.teacher_name,class_time:t.class_time,start_time:t.start_time,end_time:t.end_time};console.log("params:",e),o.updateRow(e,"course/updateCourse").then(function(e){t.result=e,t.cancel(),1==e?a.swal("修改成功","","success"):a.swal("修改失败","","error")},function(){a.swal("修改失败","","error")})}else a.swal("修改失败","","error")}}]),app.controller("indexController",["$scope","$rootScope","$http","httpService","localStorageService","$interval","SweetAlert","$window","baseService",function(e,t,n,a,o,c,r,i,l){}]),app.controller("adduserModalCtrl",["$scope","$http","$filter","$state","$stateParams","$uibModal","$uibModalInstance","httpService","SweetAlert","LoadingService",function(t,e,n,a,o,c,r,i,l,s){t.title="添加用户",t.Marks=[{id:1,name:"学生"},{id:2,name:"教师"}],t.mark=1,t.cancel=function(){r.dismiss("cancel")},t.reader=new FileReader,t.img_upload=function(e){t.reader.readAsDataURL(e[0]),t.reader.onload=function(e){t.$apply(function(){t.path=e.target.result})}},t.submitForm=function(){if(t.submit_form.$valid){var e={username:t.username,mark:t.mark};i.addRow(e,"user/addUser").then(function(e){r.dismiss("ok"),l.swal("操作成功","","success")},function(){})}}}]),app.controller("UserInfoController",["$scope","$http","$filter","$state","$stateParams","$uibModal","httpService","SweetAlert","LoadingService",function(n,e,t,a,o,c,r,i,l){n.root=[],n.pagination={totalCount:0,totalPage:0,pageSize:10,currentPage:1,PageSizeList:[5,10,30]},n.queryList=function(){var e={username:n.username,pageNo:n.pagination.currentPage,pageSize:n.pagination.pageSize};r.getAll(e,"user/showUser").then(function(e){n.pagination.totalCount=e.totalCount,n.pagination.totalPage=e.totalPage,n.pagination.pageSize=e.pageSize,n.pagination.currentPage=e.pageNo,n.root.data=e.data},function(){})},n.queryList(),n.reset=function(){n.username="",n.queryList()},n.addUserInfo=function(){c.open({backdrop:"static",keyboard:!1,animation:!0,templateUrl:"userForm.html",controller:"adduserModalCtrl"}).result.then(function(e){},function(e){n.reset()})},n.delRow=function(e){var t={id:e};i.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&r.delRow(t,"user/delUser").then(function(e){1==e?(n.reset(),i.swal("操作成功","","success")):i.swal("操作失败","","error")},function(){i.swal("操作失败","","error")})})},n.checked=[],n.selectAll=function(){n.select_all?(n.checked=[],angular.forEach(n.root.data,function(e){e.checked=!0,n.checked.push(e.id)})):angular.forEach(n.root.data,function(e){e.checked=!1,n.checked=[]})},n.selectOne=function(){angular.forEach(n.root.data,function(e){var t=n.checked.indexOf(e.id);e.checked&&-1===t?n.checked.push(e.id):e.checked||-1===t||n.checked.splice(t,1)}),n.root.data.length===n.checked.length?n.select_all=!0:n.select_all=!1},n.delRows=function(){if(n.checked.length<0||0===n.checked.length)i.swal("至少选择一条记录，再做删除","","warning");else{var t={ids:n.checked};i.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&r.delRows(t,"user/delUsers").then(function(e){e?(n.reset(),n.select_all=!1,i.swal("操作成功","","success")):i.swal("操作失败","","error")})})}}}]);