app.controller("addCourseCtrl",["$scope","$http","httpService","$uibModalInstance","SweetAlert","$rootScope",function(t,e,o,a,n,c){t.cancel=function(){a.dismiss("cancel")},t.title="添加课程信息",t.type=0,t.disabled=!0,t.submitForm=function(){if(t.submit_form.$valid){var e={code:t.code,name:t.name,class_hour:t.class_hour,type:t.type,teacher_name:t.teacher_name,class_time:t.class_time,start_time:t.start_time,end_time:t.end_time};o.addRow(e,"course/addCourse").then(function(e){t.result=e,t.cancel(),n.swal("操作成功","","success")},function(){n.swal("操作失败","","error")})}else n.swal("操作失败","","error")}}]),app.controller("courseManageCtrl",["$http","httpService","$scope","$uibModal","SweetAlert","$rootScope",function(e,o,a,t,n,c){a.root={},a.rowlist=[],a.pagination={totalCount:0,totalPage:0,pageSize:10,currentPage:1,PageSizeList:[5,10,30]},a.changePageSize=function(e){a.pagination.pageSize=e,a.pagination.currentPage=1,a.queryList()},a.queryList=function(){var e={code:a.code,name:a.name,pageNo:a.pagination.currentPage,pageSize:a.pagination.pageSize};o.getAll(e,"course/showCourse").then(function(e){a.pagination.totalCount=e.totalCount,a.pagination.totalPage=e.totalPage,a.pagination.pageSize=e.pageSize,a.pagination.currentPage=e.pageNo,a.root.data=e.data},function(){})},a.queryList(),a.addCourse=function(){t.open({size:"lg",backdrop:"static",keyboard:!1,animation:!0,templateUrl:"courseForm.html",controller:"addCourseCtrl"}).result.then(function(e){},function(e){a.queryList()})},a.editRow=function(e){t.open({size:"lg",backdrop:"static",keyboard:!1,animation:!0,templateUrl:"courseForm.html",controller:"updateCourseCtrl",resolve:{data:a.root.data[e]}}).result.then(function(e){},function(e){a.queryList()})},a.reset=function(){a.name=null,a.code=null,a.queryList()},a.delRow=function(e){var t={id:e};n.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&o.delRow(t,"course/delCourse").then(function(e){a.result=e,a.queryList(),1==e?n.swal("删除成功","","success"):n.swal("删除失败","","error")},function(){n.swal("删除失败","","error")})})},a.checked=[],a.selectAll=function(){a.select_all?(a.checked=[],angular.forEach(a.root.data,function(e){e.checked=!0,a.checked.push(e.id)})):angular.forEach(a.root.data,function(e){e.checked=!1,a.checked=[]})},a.selectOne=function(){angular.forEach(a.root.data,function(e){var t=a.checked.indexOf(e.id);e.checked&&-1===t?a.checked.push(e.id):e.checked||-1===t||a.checked.splice(t,1)}),a.root.data.length===a.checked.length?a.select_all=!0:a.select_all=!1},a.delRows=function(){if(a.checked.length<0||0===a.checked.length)n.swal("至少选择一条记录，再做删除","","warning");else{var t={ids:a.checked};n.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&o.delRows(t,"course/delCourses").then(function(e){a.result=e,a.queryList(),1==e?n.swal("删除成功","","success"):n.swal("删除失败","","error")},function(){n.swal("删除失败","","error")})})}}}]),app.controller("updateCourseCtrl",["$scope","data","$uibModalInstance","SweetAlert","httpService",function(t,o,e,a,n){console.log("da",o),t.title="编辑课程信息",t.code=o.code?o.code:"",t.name=o.name?o.name:"",t.teacher_name=o.teacherName?o.teacherName:"",t.class_hour=o.classHour?o.classHour:"",t.type=o.type?o.type:"",t.start_time=o.startTime?o.startTime:"",t.end_time=o.endTime?o.endTime:"",t.class_time=o.classTime?o.classTime:"",t.cancel=function(){e.dismiss("cancel")},t.submitForm=function(){if(t.submit_form.$valid){var e={id:o.id,code:t.code,name:t.name,class_hour:t.class_hour,type:t.type,teacher_name:t.teacher_name,class_time:t.class_time,start_time:t.start_time,end_time:t.end_time};console.log("params:",e),n.updateRow(e,"course/updateCourse").then(function(e){t.result=e,t.cancel(),1==e?a.swal("修改成功","","success"):a.swal("修改失败","","error")},function(){a.swal("修改失败","","error")})}else a.swal("修改失败","","error")}}]),app.controller("indexController",["$scope","$rootScope","$http","httpService","localStorageService","$interval","SweetAlert","$window","baseService",function(e,t,o,a,n,c,r,l,i){}]),app.controller("addschoolModalCtrl",["$scope","$http","$filter","$state","$stateParams","$uibModal","$uibModalInstance","httpService","SweetAlert","LoadingService","Upload",function(t,e,o,a,n,c,r,l,i,s,u){t.title="添加学校",t.cancel=function(){r.dismiss("cancel")},t.submitForm=function(){if(t.submit_form.$valid){var e={school_code:t.school_code,school_name:t.school_name,school_detail:t.school_detail};l.addRow(e,"school/addSchool").then(function(e){e&&null!=e?(r.dismiss("ok"),i.swal("操作成功","","success")):i.swal("操作成功","","error")},function(){i.swal("操作成功","","error")})}}}]),app.controller("collegeManageCtrl",["$scope","$http","$filter","$state","$stateParams","$uibModal","httpService","SweetAlert","LoadingService","localStorageService",function(e,t,o,a,n,c,r,l,i,s){}]),app.controller("majorManageCtrl",["$scope","$http","$filter","$state","$stateParams","$uibModal","httpService","SweetAlert","LoadingService","localStorageService",function(e,t,o,a,n,c,r,l,i,s){}]),app.controller("schoolManageCtrl",["$scope","$http","$filter","$state","$stateParams","$uibModal","httpService","SweetAlert","LoadingService","localStorageService",function(o,e,t,a,n,c,r,l,i,s){o.root=[],o.pagination={totalCount:0,totalPage:0,pageSize:10,currentPage:1,PageSizeList:[5,10,30]},o.queryList=function(){var e={school_code:o.school_code,school_name:o.school_name,pageNo:o.pagination.currentPage,pageSize:o.pagination.pageSize};r.getAll(e,"school/showSchool").then(function(e){o.pagination.totalCount=e.totalCount,o.pagination.totalPage=e.totalPage,o.pagination.pageSize=e.pageSize,o.pagination.currentPage=e.pageNo,o.root.data=e.data},function(){})},o.queryList(),o.reset=function(){o.school_code="",o.school_name="",o.queryList()},o.checked=[],o.selectAll=function(){o.select_all?(o.checked=[],angular.forEach(o.root.data,function(e){e.checked=!0,o.checked.push(e.id)})):angular.forEach(o.root.data,function(e){e.checked=!1,o.checked=[]})},o.selectOne=function(){angular.forEach(o.root.data,function(e){var t=o.checked.indexOf(e.id);e.checked&&-1===t?o.checked.push(e.id):e.checked||-1===t||o.checked.splice(t,1)}),o.root.data.length===o.checked.length?o.select_all=!0:o.select_all=!1},o.delRow=function(e){var t={id:e};l.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&r.delRow(t,"school/delSchool").then(function(e){1==e?(o.reset(),l.swal("操作成功","","success")):l.swal("操作失败","","error")},function(){l.swal("操作失败","","error")})})},o.delRows=function(){if(o.checked.length<0||0===o.checked.length)l.swal("至少选择一条记录，再做删除","","warning");else{var t={ids:o.checked};l.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&r.delRows(t,"school/delSchools").then(function(e){e?(o.reset(),o.select_all=!1,l.swal("操作成功","","success")):l.swal("操作失败","","error")})})}},o.addSchool=function(){c.open({backdrop:"static",keyboard:!1,animation:!0,templateUrl:"schoolForm.html",controller:"addschoolModalCtrl"}).result.then(function(e){},function(e){o.reset()})}}]),app.controller("adduserModalCtrl",["$scope","$http","$filter","$state","$stateParams","$uibModal","$uibModalInstance","httpService","SweetAlert","LoadingService","Upload",function(t,e,o,a,n,c,r,l,i,s,u){t.title="添加用户",t.Marks=[{id:1,name:"学生"},{id:2,name:"教师"}],t.mark=1,t.cancel=function(){r.dismiss("cancel")},t.reader=new FileReader,t.img_upload=function(e){t.reader.readAsDataURL(e[0]),t.reader.onload=function(e){t.$apply(function(){t.path=e.target.result})}},t.submitForm=function(){if(t.submit_form.$valid){var e={username:t.username,mark:t.mark};l.addRow(e,"user/addUser").then(function(e){u.upload({url:"/web-logistics/user/uploadImage",data:{id:e.id},file:t.file}),r.dismiss("ok"),i.swal("操作成功","","success")},function(){})}}}]),app.controller("UserInfoController",["$scope","$http","$filter","$state","$stateParams","$uibModal","httpService","SweetAlert","LoadingService","localStorageService",function(o,e,t,a,n,c,r,l,i,s){o.root=[],o.pagination={totalCount:0,totalPage:0,pageSize:10,currentPage:1,PageSizeList:[5,10,30]},o.queryList=function(){var e={username:o.username,pageNo:o.pagination.currentPage,pageSize:o.pagination.pageSize};r.getAll(e,"user/showUser").then(function(e){o.pagination.totalCount=e.totalCount,o.pagination.totalPage=e.totalPage,o.pagination.pageSize=e.pageSize,o.pagination.currentPage=e.pageNo,o.root.data=e.data},function(){})},o.queryList(),o.reset=function(){o.username="",o.queryList()},o.addUserInfo=function(){c.open({backdrop:"static",keyboard:!1,animation:!0,templateUrl:"userForm.html",controller:"adduserModalCtrl"}).result.then(function(e){},function(e){o.reset()})},o.delRow=function(e){var t={id:e};l.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&r.delRow(t,"user/delUser").then(function(e){1==e?(o.reset(),l.swal("操作成功","","success")):l.swal("操作失败","","error")},function(){l.swal("操作失败","","error")})})},o.checked=[],o.selectAll=function(){o.select_all?(o.checked=[],angular.forEach(o.root.data,function(e){e.checked=!0,o.checked.push(e.id)})):angular.forEach(o.root.data,function(e){e.checked=!1,o.checked=[]})},o.selectOne=function(){angular.forEach(o.root.data,function(e){var t=o.checked.indexOf(e.id);e.checked&&-1===t?o.checked.push(e.id):e.checked||-1===t||o.checked.splice(t,1)}),o.root.data.length===o.checked.length?o.select_all=!0:o.select_all=!1},o.delRows=function(){if(o.checked.length<0||0===o.checked.length)l.swal("至少选择一条记录，再做删除","","warning");else{var t={ids:o.checked};l.swal({title:"是否确认删除？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"确认",cancelButtonText:"取消",closeOnConfirm:!1},function(e){e&&r.delRows(t,"user/delUsers").then(function(e){e?(o.reset(),o.select_all=!1,l.swal("操作成功","","success")):l.swal("操作失败","","error")})})}}}]);